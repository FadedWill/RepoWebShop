@model PieDetailViewModel

<link href="~/Content/PieDetail/PieDetails.css" rel="stylesheet" />

<div class="container">
    <div class="thumbnailDetail">
        <div class="row short-Desc">
            <div class="col-sm-6 col-md-6 col-lg-6">
                <div style="width:300px; height: 300px; display:none;" class="owl-carousel owl-theme" id="owlCarousel">
                </div>
                <img alt="@Model.PieDetail.Name" src="~/Pictures/logo.png" id="defaultPicture">
            </div>
            <div class="col-sm-6 col-md-6 col-lg-6">
                <div class="caption-full">
                    <h1>@Model.PieDetail.Name</h1>
                    @Html.Partial("PiePriceCarousel", Model)
                    <p><strong>Preparación: @Model.PieDetail.PreparationTime hs</strong></p>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12 col-md-12 col-lg-12">
                <h4>@Model.PieDetail.ShortDescription</h4>
                <p>@Model.PieDetail.LongDescription</p>
            </div>
        </div>
        <div style="text-align: center;">
            <a asp-action="List" asp-controller="PieDetail" class="btn btn-primary submit-btn">
                Ver más
            </a>
        </div>
    </div>  
</div>
<script type="text/javascript">
    $(function () {
        $('.carousel').carousel({
            interval: 2000
        });
    });
    
    $.ajax({
        url: "/api/PieDetailData/GetPieDetailFotos/" + '@Model.PieDetail.FlickrAlbumId',
        method: "GET",
        success: function (result) {
            buildCarousel(result);
        },
        error: function (error) {
            alert('Algo salio mal.');
        }
    });

    function buildCarousel(result) {
        $.each(result, function (index, item) { 
            $('#owlCarousel').append('<img style="margin:auto;" class="owl-lazy" data-src="' + item + 'm.jpg" alt="">');
        })
        $('#owlCarousel').owlCarousel({
            items: 1,
            center: true,
            lazyLoad: true,
            loop: true,
            margin: 10
        });
        $('#defaultPicture').hide();
        $('#owlCarousel').show();
    }

</script>